module "compute_skus" {
  source   = "./modules/skus"
  location = var.location
}

# Use the module output to validate the VM size
variable "size" {
  type        = string
  description = "The size of the virtual machine"
  validation {
    condition     = contains(module.compute_skus.vms.details.all, var.size)
    error_message = "The VM size '${var.size}' is not valid in the region '${var.location}'. Allowed sizes are: ${join(", ", module.compute_skus.vms.details.all)}."
  }
}
